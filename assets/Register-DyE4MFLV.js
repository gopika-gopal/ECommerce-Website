import{g as k,c as C,r as u,j as e,n as o,a as x,h as f,i as N}from"./index-DhpCziyn.js";const j=m=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(m);var v={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const V=()=>{const m=k(),l=C(),[c,g]=u.useState("Login"),[s,E]=u.useState({firstName:"",lastName:"",email:"",password:""}),[r,w]=u.useState({firstName:"",lastName:"",email:"",password:""}),d=a=>{E({...s,[a.target.name]:a.target.value})},S=async()=>{var a,t,n,p;if(!j(s.email))return o.error("Email is not valid");try{const i=await x.post(`${v.VITE_SERVER}/api/v1/user/login`,s),{user:R,token:h}=i.data;localStorage.setItem("token",h),o.success("User Logged in"),l(f(R)),l(N(h)),m("/")}catch(i){o.error((t=(a=i.response)==null?void 0:a.data)==null?void 0:t.message),console.log((p=(n=i.response)==null?void 0:n.data)==null?void 0:p.message)}},y=async()=>{if(!j(s.email))return o.error("Email is not valid");let a=!0;const t={...r};if(s.firstName.trim()||(t.firstName="FirstName is required",a=!1),s.lastName.trim()||(t.lastName="Lastname is required",a=!1),s.email||(t.email="Email is required",a=!1),s.password.length<6&&(t.password="Atleast 6 character are required",a=!1),w(t),a)try{const n=await x.post(`${v.VITE_SERVER}/api/v1/user/register`,s),{newUser:p,token:i}=n.data;localStorage.setItem("token",i),o.success("User signed up"),l(f(p)),l(N(i)),m("/")}catch(n){o.error("Failed to sign up"),console.log(n)}};return e.jsx("div",{className:"account-container",children:e.jsxs("div",{className:"account-card",children:[e.jsx("h1",{children:c}),e.jsxs("div",{className:"account-fields",children:[c==="Sign up"?e.jsxs("div",{className:"signup-fields",children:[e.jsx("input",{type:"text",placeholder:"First name",name:"firstName",value:s.firstName,onChange:d}),r.firstName&&e.jsxs("p",{className:"error-message",children:["*",r.firstName]}),e.jsx("input",{type:"text",placeholder:"Last name",name:"lastName",value:s.lastName,onChange:d}),r.lastName&&e.jsxs("p",{className:"error-message",children:["*",r.lastName]})]}):e.jsx(e.Fragment,{}),e.jsx("input",{type:"email",placeholder:"Email Address",value:s.email,onChange:d,name:"email"}),r.email&&e.jsxs("p",{className:"error-message",children:["*",r.email]}),e.jsx("input",{type:"password",placeholder:"Password",name:"password",value:s.password,onChange:d}),r.password&&e.jsxs("p",{className:"error-message",children:["*",r.password]})]}),e.jsx("button",{onClick:()=>{c==="Login"?S():y()},children:c}),c==="Sign up"?e.jsxs("p",{className:"account-login",children:["Already have an account ? ",e.jsx("span",{onClick:()=>g("Login"),children:"Login here"})]}):e.jsxs("p",{className:"account-login",children:["Create an account ",e.jsx("span",{onClick:()=>g("Sign up"),children:"Click here"})]}),e.jsxs("div",{className:"account-agree",children:[e.jsx("input",{type:"checkbox",name:"",id:""}),e.jsx("p",{children:"By Continuing, I agree to the terms of use & privacy "})]})]})})};export{V as default};
