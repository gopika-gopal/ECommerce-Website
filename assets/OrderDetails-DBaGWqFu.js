import{r as l,a as h,n as j,u as v,j as s,b as u,L as b,_ as m}from"./index-DhpCziyn.js";var g={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const E=()=>{const[c,a]=l.useState(!1),[r,i]=l.useState([]);l.useEffect(()=>{d()},[]);const d=async()=>{var o;try{a(!0);const n=localStorage.getItem("token");if(!n)throw new Error("Token not found");const e=await h.get(`${g.VITE_SERVER}/api/v1/order/all`,{headers:{Authorization:`Bearer ${n}`}});a(!1),j.success("Fetched all Orders"),i((o=e==null?void 0:e.data)==null?void 0:o.orders)}catch(n){a(!1),console.log(n)}};return{allordersData:r,isLoading:c}};var x={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const p=()=>{const c=v(e=>e.user),{allordersData:a,isLoading:r}=E(),[i,d]=l.useState([]);l.useEffect(()=>{d(a)},[a]);const o=async e=>{try{const t=localStorage.getItem("token");if(!t)throw new Error("Token not found");const f=await h.delete(`${x.VITE_SERVER}/api/v1/order/${e}`,{headers:{Authorization:`Bearer ${t}`}});m.success("Order deleted")}catch(t){console.log(t)}},n=async e=>{try{if(!localStorage.getItem("token"))throw new Error("Token not found");const f=await h.put(`${x.VITE_SERVER}/api/v1/order/${e}`,{userId:c==null?void 0:c._id});m.success("Order Processed")}catch(t){console.log(t)}};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"dash-container",children:[s.jsxs("div",{className:"sidebar",children:[s.jsx(u,{className:"sidebar-btn active",to:"/admin/dashboard/products",style:{textDecoration:"none",color:"white",fontWeight:"bold",borderRadius:"5px"},children:"Products"}),s.jsx(u,{to:"/admin/dashboard/customers",className:"sidebar-btn active",style:{textDecoration:"none",color:"white",fontWeight:"bold",borderRadius:"5px"},children:"Users"}),s.jsx("p",{className:"sidebar-btn active",style:{textDecoration:"none",color:"white",fontWeight:"bold",borderRadius:"5px"},children:"Orders"})]}),s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"product-header",children:s.jsx("h2",{children:"ORDERS"})}),s.jsxs("div",{id:"customer",children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"heading",children:"Order ID"}),s.jsx("div",{className:"heading",children:"Name"}),s.jsx("div",{className:"heading",children:"Total"}),s.jsx("div",{className:"heading",children:"Status"}),s.jsx("div",{className:"heading",children:"Action"})]}),r?s.jsx(b,{}):i==null?void 0:i.map(e=>{var t;return s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"subitem",children:[e==null?void 0:e._id.slice(0,15),"..."]}),s.jsx("div",{className:"subitem",children:(t=e==null?void 0:e.userId)==null?void 0:t.firstName}),s.jsx("div",{className:"subitem",children:e==null?void 0:e.total}),s.jsx("div",{className:"subitem",children:e==null?void 0:e.status}),s.jsxs("div",{className:"subitem",children:[s.jsx("button",{onClick:()=>n(e==null?void 0:e._id),className:"process-order-btn",children:"Process"}),s.jsx("button",{onClick:()=>o(e==null?void 0:e._id),className:"user-delete-button",children:"Delete"})]})]},e==null?void 0:e._id)})]})]})]})})};export{p as default};
